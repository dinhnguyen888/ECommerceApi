# API Th∆∞∆°ng M·∫°i ƒêi·ªán T·ª≠

API backend m·∫°nh m·∫Ω ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng .NET 8.0, cung c·∫•p ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng ƒë·ªÉ qu·∫£n l√Ω c·ª≠a h√†ng tr·ª±c tuy·∫øn.

## üõ† C√¥ng Ngh·ªá S·ª≠ D·ª•ng

-   **Framework**: .NET 8.0
-   **X√°c th·ª±c**: JWT, OAuth (Google, GitHub)
-   **C∆° s·ªü d·ªØ li·ªáu**:
    -   MySQL (CSDL ch√≠nh)
    -   MongoDB (CSDL ph·ª•)
-   **T√†i li·ªáu API**: Swagger/OpenAPI
-   **ORM**: Entity Framework Core
-   **Mapping**: AutoMapper
-   **T√≠ch h·ª£p thanh to√°n**:
    -   VNPay
    -   Momo
    -   PayOS
    -   PayPal

## ‚ú® T√≠nh NƒÉng

### X√°c Th·ª±c & Ph√¢n Quy·ªÅn

-   X√°c th·ª±c b·∫±ng JWT
-   T√≠ch h·ª£p OAuth (Google, GitHub)
-   Ph√¢n quy·ªÅn theo vai tr√≤ (Admin, User)
-   C∆° ch·∫ø refresh token
-   H·ªó tr·ª£ ƒëƒÉng nh·∫≠p qua m·∫°ng x√£ h·ªôi

### Qu·∫£n L√Ω S·∫£n Ph·∫©m

-   Thao t√°c CRUD v·ªõi s·∫£n ph·∫©m
-   Qu·∫£n l√Ω danh m·ª•c
-   T√¨m ki·∫øm v√† l·ªçc s·∫£n ph·∫©m
-   B√¨nh lu·∫≠n v√† ƒë√°nh gi√° s·∫£n ph·∫©m

### T√≠nh NƒÉng Mua S·∫Øm

-   Gi·ªè h√†ng
-   Qu·∫£n l√Ω ƒë∆°n h√†ng
-   Nhi·ªÅu ph∆∞∆°ng th·ª©c thanh to√°n
-   Qu·∫£n l√Ω banner qu·∫£ng c√°o

### Qu·∫£n L√Ω Ng∆∞·ªùi D√πng

-   Qu·∫£n l√Ω h·ªì s∆° ng∆∞·ªùi d√πng
-   Qu·∫£n l√Ω vai tr√≤
-   Th√¥ng b√°o qua email
-   Qu·∫£n l√Ω m·∫≠t kh·∫©u

### T√≠ch H·ª£p Thanh To√°n

-   T√≠ch h·ª£p VNPay
-   H·ªó tr·ª£ thanh to√°n Momo
-   T√≠ch h·ª£p PayOS
-   T√≠ch h·ª£p PayPal

### Tin T·ª©c & N·ªôi Dung

-   Qu·∫£n l√Ω tin t·ª©c
-   D·ªãch v·ª• crawl tin t·ª©c
-   H·ªá th·ªëng b√¨nh lu·∫≠n

## üóÉ C·∫•u Tr√∫c C∆° S·ªü D·ªØ Li·ªáu

### MySQL (CSDL Ch√≠nh)

-   T√†i kho·∫£n ng∆∞·ªùi d√πng
-   S·∫£n ph·∫©m
-   Danh m·ª•c
-   ƒê∆°n h√†ng
-   Thanh to√°n
-   Vai tr√≤
-   Refresh Token
-   Banner
-   B√¨nh lu·∫≠n

### MongoDB

-   L∆∞u tr·ªØ tin t·ª©c v√† n·ªôi dung

## üîê T√≠nh NƒÉng B·∫£o M·∫≠t

-   X√°c th·ª±c JWT
-   M√£ h√≥a m·∫≠t kh·∫©u
-   C·∫•u h√¨nh CORS
-   Ki·ªÉm so√°t truy c·∫≠p theo vai tr√≤
-   X·ª≠ l√Ω thanh to√°n an to√†n

## üíª C√°c Repository Li√™n Quan

-   Repository Frontend: [E-commerce Frontend](https://github.com/dinhnguyen888/e-commerce-website.git)
-   Repository Admin Panel: [E-commerce Admin Panel](https://github.com/dinhnguyen888/e-commerce-admin.git)

## üöÄ Chi Ti·∫øt API

### Thao T√°c Ng∆∞·ªùi D√πng

-   ƒêƒÉng k√Ω v√† x√°c th·ª±c
-   Qu·∫£n l√Ω h·ªì s∆°
-   Kh√¥i ph·ª•c m·∫≠t kh·∫©u
-   ƒêƒÉng nh·∫≠p qua m·∫°ng x√£ h·ªôi

### Thao T√°c S·∫£n Ph·∫©m

-   Danh s√°ch v√† chi ti·∫øt s·∫£n ph·∫©m
-   L·ªçc theo danh m·ª•c
-   Ch·ª©c nƒÉng t√¨m ki·∫øm
-   ƒê√°nh gi√° v√† nh·∫≠n x√©t

### Thao T√°c Mua S·∫Øm

-   Qu·∫£n l√Ω gi·ªè h√†ng
-   X·ª≠ l√Ω ƒë∆°n h√†ng
-   ƒêa d·∫°ng ph∆∞∆°ng th·ª©c thanh to√°n
-   L·ªãch s·ª≠ ƒë∆°n h√†ng

### Thao T√°c Admin

-   Qu·∫£n l√Ω ng∆∞·ªùi d√πng
-   Qu·∫£n l√Ω s·∫£n ph·∫©m
-   Qu·∫£n l√Ω ƒë∆°n h√†ng
-   Qu·∫£n l√Ω banner
-   Qu·∫£n l√Ω vai tr√≤
-   Qu·∫£n l√Ω tin t·ª©c

## üîß C·∫•u H√¨nh

·ª®ng d·ª•ng s·ª≠ d·ª•ng c√°c c·∫•u h√¨nh cho:

-   K·∫øt n·ªëi c∆° s·ªü d·ªØ li·ªáu (MySQL, MongoDB)
-   C√†i ƒë·∫∑t JWT
-   Th√¥ng tin x√°c th·ª±c OAuth
-   C·∫•u h√¨nh c·ªïng thanh to√°n
-   C√†i ƒë·∫∑t d·ªãch v·ª• email

## üõ° B·∫£o M·∫≠t API

-   X√°c th·ª±c d·ª±a tr√™n JWT
-   Ph√¢n quy·ªÅn theo vai tr√≤
-   Ki·ªÉm tra ƒë·∫ßu v√†o
-   Ch√≠nh s√°ch CORS
-   X·ª≠ l√Ω thanh to√°n an to√†n

## üì• H∆∞·ªõng D·∫´n C√†i ƒê·∫∑t

### Y√™u C·∫ßu H·ªá Th·ªëng

-   .NET 8.0 SDK
-   MySQL Server
-   MongoDB Server

### C·∫•u Tr√∫c File appsettings.json

```json
{
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft.AspNetCore": "Warning"
        }
    },
    "DefaultPassword": {
        "Admin": "your_admin_password",
        "User": "your_user_password"
    },
    "ConnectionStrings": {
        "MySQLConnection": "your_mysql_connection_string",
        "MongoDBConnection": "your_mongodb_connection_string"
    },
    "MongoDBDatabase": "your_mongodb_database_name",
    "Smtp": {
        "Host": "smtp_host",
        "Port": "smtp_port",
        "Username": "smtp_username",
        "Password": "smtp_password",
        "EnableSsl": "true/false",
        "Email": "smtp_email"
    },
    "Github": {
        "ClientId": "your_github_client_id",
        "ClientSecret": "your_github_client_secret"
    },
    "Google": {
        "ClientId": "your_google_client_id",
        "ClientSecret": "your_google_client_secret"
    },
    "Vnpay": {
        "TmnCode": "your_vnpay_tmn_code",
        "HashSecret": "your_vnpay_hash_secret",
        "BaseUrl": "vnpay_base_url",
        "ReturnUrl": "your_return_url"
    },
    "Momo": {
        "Endpoint": "momo_endpoint",
        "PartnerCode": "your_partner_code",
        "AccessKey": "your_access_key",
        "SecretKey": "your_secret_key"
    },
    "PayOS": {
        "CLIENT_ID": "your_client_id",
        "API_KEY": "your_api_key",
        "CHECKSUM_KEY": "your_checksum_key",
        "CANCEL_URL": "your_cancel_url",
        "RETURN_URL": "your_return_url"
    },
    "Paypal": {
        "ClientId": "your_paypal_client_id",
        "SecretKey": "your_paypal_secret_key",
        "BaseUrl": "paypal_api_base_url"
    },
    "Jwt": {
        "Key": "your_jwt_secret_key",
        "Issuer": "your_issuer",
        "Audience": "your_audience",
        "ExpiresInDays": 1
    },
    "URL": {
        "FrontendUrlPaymentCallback": "your_frontend_payment_callback_url",
        "FrontendUrl": "your_frontend_url",
        "FrontendUrlOAuthCallback": "your_frontend_oauth_callback_url"
    },
    "AllowedHosts": "*"
}
```

### C√°c B∆∞·ªõc C√†i ƒê·∫∑t

1. Clone repository
2. T·∫°o file appsettings.json theo c·∫•u tr√∫c tr√™n
3. C·∫≠p nh·∫≠t c√°c gi√° tr·ªã c·∫•u h√¨nh theo m√¥i tr∆∞·ªùng
4. M·ªü terminal v√† ch·∫°y c√°c l·ªánh:

```bash
dotnet restore
dotnet ef database update
dotnet run
```

API s·∫Ω ch·∫°y m·∫∑c ƒë·ªãnh t·∫°i ƒë·ªãa ch·ªâ: https://localhost:7202
